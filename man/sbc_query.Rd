% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/db.R
\name{sbc_query}
\alias{sbc_query}
\title{Ejecutar consulta SQL}
\usage{
sbc_query(
  conn,
  sql,
  params = NULL,
  normalizar_columnas = TRUE,
  mostrar_info = TRUE
)
}
\arguments{
\item{conn}{Objeto de conexión DBI válido}

\item{sql}{Consulta SQL a ejecutar. Puede usar \code{glue::glue()} para interpolación}

\item{params}{Lista de parámetros para consultas parametrizadas (opcional).
Usar \code{?} como placeholder en el SQL}

\item{normalizar_columnas}{Convertir nombres de columnas a minúsculas (default: \code{TRUE})}

\item{mostrar_info}{Mostrar mensaje con número de registros obtenidos (default: \code{TRUE})}
}
\value{
tibble con los resultados de la consulta
}
\description{
Ejecuta una consulta SQL y devuelve los resultados como tibble.
Soporta consultas parametrizadas y normalización automática de nombres de columnas.
}
\examples{
\dontrun{
# Consulta simple
result <- sbc_query(conn, "SELECT * FROM tabla WHERE id > 100")

# Con glue para interpolación
num_estudio <- 42
result <- sbc_query(conn, glue::glue("SELECT * FROM encuestas_{num_estudio}"))

# Consulta parametrizada (evita SQL injection)
result <- sbc_query(
  conn, 
  "SELECT * FROM usuarios WHERE id = ? AND activo = ?",
  params = list(123, TRUE)
)

# Sin normalizar columnas
result <- sbc_query(conn, "SELECT * FROM tabla", normalizar_columnas = FALSE)
}
}
